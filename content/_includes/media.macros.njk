{% import 'utility.macros.njk' as utility %}

{% macro img(
  src,
  alt='',
  attrs={}
) %}
  {% if src %}
    <img
      src="/assets/images/{{ src }}"
      alt="{{ alt }}"
      {{ utility.show_attrs(attrs) }}/>
  {% endif %}
{% endmacro %}

{% macro svg(
  path
) %}
  {% include path + '.svg' %}
{% endmacro %}

{% macro grid(
  image,
  name='',
  attrs={},
  reverse=false,
  content=none
) %}
  {%- set content = content if (content != none) else caller() -%}

  <div data-media="{{ name }}"
    {{ utility.attr_if('data-reverse', reverse) }}
    {{ utility.show_attrs(attrs) }}>

    <div class="media-image">
      {{ image | safe }}
    </div>

    <div class="media-content">
      {{ content | safe }}
    </div>
  </div>
{% endmacro %}

{% macro screen(
  device='iphone',
  fill=none,
  content=none
) %}
  {%- set content = content if (content != none) else caller() -%}
  {%- set style = ['--device-fill', fill] | join(':') if fill else none -%}
  <div data-screen="{{ device }}"
    {{ utility.attr_if('style', style) }}>
    {{ content | safe }}
    {% include 'devices/' + device + '.svg' %}
  </div>
{% endmacro %}
