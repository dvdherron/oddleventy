{% set index = renderData.index or index %}

{% if index or bird %}
  {% set index = {'slug': index} if index | typeCheck('string') else index %}
  {% set event_pages = {
    'all': true,
    'only': false,
    'true': 'mixed'
  } %}

  {% set list = collections._post | byBird(bird) if bird else collections[index.slug] %}
  {% set list = list | getEvents(event_pages[index.events]) if index.events else list %}

  {% if list %}
    {% set list_title = index.slug | displayName if index.slug else bird | capitalize + "'s" %}
    {% set list_title = list_title + ' Resources' if list_title else none %}

    {% if index.title != 'none' %}
      {{ layout.title(index.title or list_title) }}
    {% endif %}

    {{ post.list(list, collections) }}
  {% endif %}
{% endif %}

