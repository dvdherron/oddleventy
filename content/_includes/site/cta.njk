{% import 'content.macros.njk' as render %}
{% import 'utility.macros.njk' as utility %}

{% set cta_url = ['/_sitedata/cta/', cta or 'default', '/'] | join %}
{% set cta = collections.all | getPage(cta_url) %}

{% if cta %}
  <section data-layout="cta">
    {% if cta.data.image %}
      <img
        src="{{ site.images + cta.data.image.src }}"
        alt="{{ cta.data.image.alt }}">
    {% endif %}

    {% set cta_content %}
      <h2>{{ cta.data.title | mdInline | safe }}</h2>
      {{ cta.templateContent | safe }}
    {% endset %}

    {% if cta.data.face %}
      {{ render.media(
        src='faces/' + (cta.data.media.face or 'miriam') + '.svg',
        embed=true,
        content=cta_content | safe
      ) }}
    {% else %}
      {{ cta_content | safe }}
    {% endif %}
  </section>
{% endif %}
